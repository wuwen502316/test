<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>dragonQuest</title>
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"/>
<script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/autoload.js"></script>
</head>
<style>
	.audio{
		position: absolute;
		top:50%;
		left:50%;
		transform:translate(-50%,-50%)
	}
</style>
<body>




</body>
</html>
<script charset="utf-8" type='text/javascript'>
var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
var source;
function _ajax(url,callBack) {
	var xhr = new XMLHttpRequest();
	xhr.open('GET', url, true);
	xhr.responseType = 'arraybuffer';
	xhr.onload = function() {
		callBack(xhr);
	};
	//function(e){"Error with decoding audio data" + e.err};
	
	xhr.send();
}
 function getDate(){
	source = audioCtx.createBufferSource();
	_ajax("https://wuwen502316.github.io/test/1.mp3",function(xhr){
		audioData = xhr.response;
		audioCtx.decodeAudioData(audioData, function(buffer) {
		source.buffer = buffer;
		source.connect(audioCtx.destination);
		source.loop = true;
		})
	});

}
function audioPlay(){
	getDate();
	source.start(0);
	document.removeEventListener("click",audioPlay);
}

document.addEventListener("click",audioPlay);

</script>


